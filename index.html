<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<a class="navbar-brand">
			STUDENT PORTAL
			</a>
		</div>
		<ul class="nav navbar-nav">
			<li> <a class="navbar-brand">HOME </a></li>
		</ul>
		<ul class="nav navbar-nav navbar-right">
			<li> <a class="navbar-brand"><i class="glyphicon glyphicon-log-in"> </i> SIGN IN</a></li>
			<li> <a class="navbar-brand"><i class="glyphicon glyphicon-user"> </i> SIGN UP </a></li>
		</ul>
	</div>
</nav>

<br>
<br>
<br>
<div class="container">
<h2 class="text-danger">REGISTRATION FORM</h2>

<div class="row">
<div class="col-sm-4">
  <button type="button" class="btn btn-default" id="button_register" onclick="register_record()">Register</button>
 </div>
<div class="col-sm-4"> 
  <button type="button" class="btn btn-default" id="button_delete" onclick="delete_record()">DELETE</button>
  </div>
  <div class="col-sm-4">
  <button type="button" class="btn btn-default" id="button_edit" onclick="edit_record()">EDIT</button>
  </div>
 </div>
<div class="row">
<div class="col-sm-6">

<br>  <br>
<form method="get" id="form1">

  <div class="form-group" id="form_rollno" style="display:none;">
    <label for="rollno">Roll NO:</label>
    <input type="text" class="form-control" id="rollno">
  </div>
  <div class="form-group" id="form_name" style="display:none;">
    <label for="email">Name:</label>
    <input type="name" class="form-control" id="name">
  </div>
  <div class="form-group" id="form_email" style="display:none;">
    <label for="email">EMAIL:</label>
    <input type="email" class="form-control" id="email">
  </div>
  <button type="button" class="btn btn-default" style="display:none;" id="button_reset" onclick="
document.getElementById("form1").reset();">RESET</button>
  <button type="button" class="btn btn-default" style="display:none;" id="button_submit" onclick="sub()">SUBMIT</button>
 
</form>
</div>
</div>

<br>
<h4 class="text-danger">DATABASE</h4>
<table class="table table-hover" id="table">
<thead>
<th>ROLLNO:</th>
<th>NAME:</th>
<th>EMAIL:</th>
<tbody id="tbody">
</tbody>
</table>
</div>
<script>
var a=0;

function main()
{
	document.getElementById("form_name").style.display="none";
	document.getElementById("form_email").style.display="none";
	document.getElementById("form_rollno").style.display="none";
	document.getElementById("button_reset").style.display="none";
	document.getElementById("button_submit").style.display="none";
} 
function register_record()
{
	document.getElementById("form_name").style.display="block";
	document.getElementById("form_email").style.display="block";
	document.getElementById("form_rollno").style.display="block";
	document.getElementById("button_reset").style.display="inline";
	document.getElementById("button_submit").style.display="inline";
	a=1;
}
function delete_record()
{
	document.getElementById("form_name").style.display="none";
	document.getElementById("form_email").style.display="none";
	document.getElementById("form_rollno").style.display="block";
	document.getElementById("button_reset").style.display="inline";
	document.getElementById("button_submit").style.display="inline";
	a=2;
}
function edit_record()
{
	document.getElementById("form_name").style.display="none";
	document.getElementById("form_email").style.display="none";
	document.getElementById("form_rollno").style.display="block";
	document.getElementById("button_reset").style.display="inline";
	document.getElementById("button_submit").style.display="inline";
	a=3;
}
function display()
{
	document.getElementById("form_name").style.display="block";
	document.getElementById("form_email").style.display="block";
	document.getElementById("form_rollno").style.display="none";
	a=4;
}

function sub()
{
	if(a==1)
	{
		entry();
		main();
	}
	else if(a==2)
	{
		delete_entry();
	}
	else if(a==3)
	{
		if(check()==1)
		{
			display();	
		}
		else{
			alert("NO SUCH RECORD");	
		}
		
	}
	else if(a==4)
	{
	edit();
	main();
	}
}
function check()
{
var a=document.getElementsByTagName("tr");
var i=1;
while(i<a.length)
{
	var row=a[i].firstChild.innerHTML;
	if(row==document.getElementById("rollno").value)
	{
		return 1;
	}
	i++;
}
return 0;
}
function edit()
{
var a=document.getElementsByTagName("tr");
var i=1;
while(i<a.length)
{
	var row=a[i].firstChild.innerHTML;
	if(row==document.getElementById("rollno").value)
	{
		a[i].childNodes[1].innerHTML=document.getElementById("name").value;
		a[i].childNodes[2].innerHTML=document.getElementById("email").value;
	}
	i++;
}
document.getElementById("form1").reset();
}
function delete_entry()
{
var a=document.getElementsByTagName("tr");
var table=document.getElementById("table");
var i=1;
while(i<a.length)
{
	var row=a[i].firstChild.innerHTML;
	if(row==document.getElementById("rollno").value)
	{
		table.deleteRow(i);
	}
	i++;
}
document.getElementById("form1").reset();
}
function entry()
{
var name=document.getElementById("name").value;
var email=document.getElementById("email").value;
var rollno=document.getElementById("rollno").value;
var pttrn1=/[a-z A-Z]+\s[a-z A-Z]+/;
var pttrn2=/[a-z A-Z]+\.[a-z A-Z]+[@gmail.com]/;
var pttrn3=/^[0-9]{10}$/;
if(name == "")
	{
	window.alert("NAME CANNOT BE NULL");
	}
	
else if(email == "")
	{
	window.alert("EMAIL CANNOT BE NULL");
	}
else if(rollno == "")
	{
	window.alert("ROLLNO CANNOT BE NULL");
	}
else if(!pttrn1.test(name))
	{
	window.alert("ENTER NAME IN CORRECT FORMAT");
	}
else if(!pttrn2.test(email))
	{
	window.alert("ENTER EMAIL IN CORRECT FORMAT");
	}
else if(!pttrn3.test(rollno))
	{
	window.alert("ENTER ROLL NO IN CORRECT FORMAT");
	}
else{
var array=document.getElementsByTagName("tr");
var flag=1;	
var i=1;

while(i<array.length)
{
	
	var row=array[i].firstChild.innerHTML;	
	if(row==document.getElementById("rollno").value)
	{flag=0;}
	i++;
}

if(flag == 0)
{
	window.alert("RECORD ALREADY EXISTS");
}
else{
var a=document.createElement("tr");
var b=document.createElement("td");
var c=document.createTextNode(rollno);
b.appendChild(c);
a.appendChild(b);
var e=document.createElement("td");
var f=document.createTextNode(name);
e.appendChild(f);
a.appendChild(e);
var m=document.createElement("td");
var n=document.createTextNode(email);
m.appendChild(n);
a.appendChild(m);

var  z=document.getElementById("tbody");
z.appendChild(a);
document.getElementById("form1").reset();
}
}
}
</script>
</body>
</html>
